import{A as l,E as h,u,j as r,T as f}from"./index-KHzH90Td.js";import{C as x}from"./CardError-HHnOdIhq.js";const y=async()=>{const e=await fetch(`${l}${h.FACTOR_GRADES_NOW}`);if(!e.ok)throw new Error("Failed to fetch Factor Grades (Now).");return await e.json()},w=async()=>{const e=await fetch(`${l}${h.FACTOR_GRADES_3M}`);if(!e.ok)throw new Error("Failed to fetch Factor Grades (3M).");return await e.json()},m=async()=>{const e=await fetch(`${l}${h.FACTOR_GRADES_6M}`);if(!e.ok)throw new Error("Failed to fetch Factor Grades (6M).");return await e.json()},j=e=>Object.fromEntries(Object.entries(e).map(([t,s])=>[t,s.current])),F=e=>e,p=e=>Object.fromEntries(e.data),M=e=>u({queryKey:["factor-grades","now"],queryFn:async()=>{const t=await y();return j(t)},enabled:e,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!1,refetchInterval:5e3}),N=e=>u({queryKey:["factor-grades","threeM"],queryFn:async()=>{const t=await w();return F(t)},enabled:e,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!1,refetchInterval:18e4}),E=e=>u({queryKey:["factor-grades","sixM"],queryFn:async()=>{const t=await m();return p(t)},enabled:e,refetchOnWindowFocus:!1,refetchOnMount:!0,refetchOnReconnect:!1,refetchInterval:36e4}),O=e=>{const t=M(e),s=N(e),a=E(e),o={now:t.data,threeM:s.data,sixM:a.data},c=t.isLoading||s.isLoading||a.isLoading,i=t.isError||s.isError||a.isError,d=t.error||s.error||a.error;return{data:o,isLoading:c,isError:i,error:d}},G=({isPremiumUser:e=!1})=>{const{data:t,isLoading:s,isError:a}=O(e);if(s)return r.jsx(f,{rowCount:6,className:"mb-4"});if(a||!t||!t.now)return r.jsx(x,{minHeight:255});const{now:o,threeM:c,sixM:i}=t,d=Object.keys(o);return r.jsxs("div",{className:"p-4 bg-white",children:[r.jsx("h2",{className:"font-semibold text-2xl mb-2 text-gray",children:"Factor Grades"}),r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-gray [&_th]:font-normal text-xs",children:[r.jsx("th",{className:"py-1 px-2"}),r.jsx("th",{className:"py-1 px-2",children:"Now"}),r.jsx("th",{className:"py-1 px-2",children:"3M ago"}),r.jsx("th",{className:"py-1 px-2",children:"6M ago"})]})}),r.jsx("tbody",{children:d.map(n=>r.jsxs("tr",{className:"[&_td]:font-semibold [&_td:not(:first-child)]:text-center",children:[r.jsx("td",{className:"py-1 pr-2 text-blue",children:n}),r.jsx("td",{className:"py-1 px-2",children:o?.[n]??"-"}),r.jsx("td",{className:"py-1 px-2",children:c?.[n]??"-"}),r.jsx("td",{className:"py-1 px-2",children:i?.[n]??"-"})]},n))})]})]})};export{G as default};
